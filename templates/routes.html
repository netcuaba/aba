{% extends "base.html" %}

{% block title %}Quáº£n lÃ½ tuyáº¿n Ä‘Æ°á»ng - Há»‡ thá»‘ng quáº£n lÃ½ váº­n chuyá»ƒn{% endblock %}

{% block content %}
<h2>ğŸ›£ï¸ Quáº£n lÃ½ tuyáº¿n Ä‘Æ°á»ng</h2>

<div style="background: rgba(155, 89, 182, 0.1); padding: 20px; border-radius: 10px; margin-bottom: 30px;">
    <h3 style="color: #9b59b6; margin-bottom: 15px;">â• ThÃªm tuyáº¿n má»›i</h3>
    <form method="post" action="/routes/add" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
        <div class="form-group">
            <label for="route_code">MÃ£ tuyáº¿n *</label>
            <input type="text" id="route_code" name="route_code" required placeholder="VD: NA_002">
        </div>
        <div class="form-group">
            <label for="route_name">Lá»™ trÃ¬nh *</label>
            <input type="text" id="route_name" name="route_name" required placeholder="VD: Kho Trung Chuyá»ƒn -> BÆ°u Cá»¥c">
        </div>
        <div class="form-group">
            <label for="distance">Khoáº£ng cÃ¡ch (km)</label>
            <input type="number" id="distance" name="distance" step="0.1" placeholder="VD: 178">
        </div>
        <div class="form-group">
            <label for="monthly_salary">LÆ°Æ¡ng tuyáº¿n/thÃ¡ng (VNÄ)</label>
            <input type="number" id="monthly_salary" name="monthly_salary" min="0" placeholder="VD: 10500000" 
                   oninput="formatNumberInput(this)" onblur="validateIntegerInput(this)">
            <small class="form-help">Nháº­p sá»‘ nguyÃªn (vÃ­ dá»¥: 10,500,000 hoáº·c 10500000)</small>
        </div>
        <div class="form-group" style="display: flex; align-items: end;">
            <button type="submit" class="btn btn-success">ThÃªm tuyáº¿n</button>
        </div>
    </form>
</div>

<h3>ğŸ“‹ Danh sÃ¡ch tuyáº¿n Ä‘Æ°á»ng</h3>
{% if routes %}
<table class="table">
    <thead>
        <tr>
            <th>STT</th>
            <th style="width: 150px;">MÃ£ tuyáº¿n</th>
            <th>Lá»™ trÃ¬nh</th>
            <th>Khoáº£ng cÃ¡ch (KM)</th>
            <th>LÆ°Æ¡ng tuyáº¿n/thÃ¡ng</th>
            <th>Thao tÃ¡c</th>
        </tr>
    </thead>
    <tbody>
        {% for route in routes %}
        <tr>
            <td>{{ loop.index }}</td>
            <td style="white-space: nowrap;"><strong>{{ route.route_code }}</strong></td>
            <td>{{ route.route_name }}</td>
            <td>{{ "{:,.0f}".format(route.distance) if route.distance else "-" }}</td>
            <td class="number">{{ "{:,.0f}".format(route.monthly_salary) if route.monthly_salary else "-" }}</td>
            <td>
                <div style="display: flex; gap: 5px;">
                    <a href="/routes/edit/{{ route.id }}" class="btn btn-sm btn-primary" style="padding: 5px 10px; font-size: 12px;">Sá»­a</a>
                    <form method="post" action="/routes/delete/{{ route.id }}" style="display: inline;" onsubmit="return confirm('Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n xÃ³a tuyáº¿n nÃ y?')">
                        <button type="submit" class="btn btn-sm btn-danger" style="padding: 5px 10px; font-size: 12px;">XÃ³a</button>
                    </form>
                </div>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<div style="text-align: center; padding: 40px; color: #7f8c8d;">
    <h3>ğŸ›£ï¸ ChÆ°a cÃ³ tuyáº¿n nÃ o</h3>
    <p>HÃ£y thÃªm tuyáº¿n Ä‘áº§u tiÃªn báº±ng form bÃªn trÃªn</p>
</div>
{% endif %}

<!-- LÆ°u Ã½ - ÄÃ£ áº©n -->
<div style="display: none; margin-top: 30px; padding: 20px; background: rgba(241, 196, 15, 0.1); border-radius: 10px; border-left: 4px solid #f1c40f;">
    <h4 style="color: #f39c12; margin-bottom: 10px;">ğŸ’¡ LÆ°u Ã½:</h4>
    <ul style="color: #2c3e50; line-height: 1.6;">
        <li>MÃ£ tuyáº¿n pháº£i lÃ  duy nháº¥t trong há»‡ thá»‘ng</li>
        <li>Lá»™ trÃ¬nh mÃ´ táº£ chi tiáº¿t tuyáº¿n Ä‘Æ°á»ng váº­n chuyá»ƒn</li>
        <li>Khoáº£ng cÃ¡ch giÃºp tÃ­nh toÃ¡n chi phÃ­ váº­n chuyá»ƒn chÃ­nh xÃ¡c</li>
        <li>LÆ°Æ¡ng tuyáº¿n/thÃ¡ng lÃ  má»©c lÆ°Æ¡ng cá»‘ Ä‘á»‹nh cho tuyáº¿n nÃ y má»—i thÃ¡ng</li>
        <li>NhÃ¢n viÃªn sáº½ Ä‘Æ°á»£c phÃ¢n cÃ´ng khi ghi nháº­n chuyáº¿n hÃ ng ngÃ y</li>
    </ul>
</div>

{% endblock %}
